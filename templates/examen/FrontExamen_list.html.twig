{% extends 'Front_navbar_footer.html.twig' %}
{% block title %} <div

        class="padding-y-60 bg-cover"
        data-dark-overlay="6"
        style="background: url({{ asset('frontoffice/assets/img/passageex.png')}}) no-repeat"
>
        <div class="container">
            <h1 class="text-white">Liste des Examens :</h1>
            <ol
                    class="breadcrumb breadcrumb-double-angle text-white bg-transparent p-0"
            >
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Examens</a></li>
                <li class="breadcrumb-item">Liste des Examen</li>
            </ol>
        </div>
    </div>{% endblock %}
{% block body %}

<section class="pt-5 paddingBottom-100 bg-light-v2">

    <div class="container">
        <!--block examen tri -->
        <ul class="nav-item nav-item__has-dropdown">
            <a
                    class="nav-link dropdown-toggle"
                    href="#"
                    data-toggle="dropdown"><i class='fas fa-filter'></i> Trier Par </a>
            <ul class="dropdown-menu">
                <li>
                    <a href="{{ path('list_examen_Front') }}" class="nav-link">
                        ALL
                    </a>
                </li>
                <li>
                    <a href="{{ path('listExamen_ASC') }}" class="nav-link">
                        Prix Ascendant
                    </a>
                </li>
                <li>
                    <a href="{{ path('listExamen_DESC')}}" class="nav-link" >
                        Prix Descendant
                    </a>
                </li>
                <li>
                    <a href="{{ path('listExamen_TITRE')}}" class="nav-link">
                        TItre
                    </a>
                </li>
                <li>
                    <a href="{{ path('listExamen_DATE')}}" class="nav-link" >
                        Date
                    </a>
                </li>

            </ul>
        </ul>

        <!--endblock examen tri -->
        <!--block examen recherche avancee jquery and ajax -->
        <form class="w-search">
            <div class="sidebar-search">

                <div class="input-group custom-search-form">

                    <input type="text" id="search" class="form-control pl-3" placeholder="Search here">
                </div>
                <!-- /input-group -->
            </div>
            <ul class="nav" id="side-menu">
                <li>
                    <a href="#"><span class="fa arrow"></span></a>
                    <ul  class="nav " id="entitiesNav">
                    </ul>
                </li>
            </ul>



        </form>
        <!--Endblock examen recherche avancee jquery and ajax -->

        <div class="row">

            {% for e in examen %}
            <div class="col-lg-4 col-md-6 marginTop-30">
                <div class="card shadow-v1">
                    <img
                            class="card-img-top"
                            src="{{ asset('frontoffice/assets/img/Exam.jpg') }}"
                            alt=""
                    />
                    <div class="card-body">
                        <a href="#" class="h6 mb-3">
                           <h4>{{ e.titre }}</h4>
                        </a>
                        <br>
                        <p class="mb-0">
                          l'examen eura lieu le : <label style="color: #0074f0">{{ e.date | date("d/m/Y") }}</label>
                            Avec un prix de  <label style="color: #0c84ff"> {{ e.prix }}DT</label> et un niveau <label style="color: #0c84ff">
                                {{ e.niveau }}</label>.
                        </p>
                        <br>
                        <p class="mb-0" style="color:#ff2255">
                            <i class='fas fa-exclamation-circle' style='color:red'></i>
                            Tenter votre chance et inscrivez vous dans l'examen  <label style="color: #0074f0">{{e.titre}}</label>
                            et Bonne Chance !!!
                        </p>

                    </div>
                    <div class="card-footer">
                        <div class="media">
                          <!--  <img class="iconbox" src="{{ asset('frontoffice/assets/img/avatar/4.jpg')}}" alt="" />    -->

                            <div class="media-body ml-4">
                                <a class="btn btn-block btn-outline-instagram" href="{{ path('inscripexam_new', {'idexam': e.id}) }}" >S'inscrire </a>
                            </div>


                        </div>

                    </div>
                </div>
            </div>
            {% endfor %}


        </div>

        {# display navigation #}
        <div class="navigation">
            {{ knp_pagination_render(examen) }}
        </div>


        <!--END row-->


    </div>
    <!-- END container-->

</section>

    <script src="{{ asset('frontoffice/assets/vendor/jquery-3.5.1/jquery-3.5.1.min.js') }}"></script>
    <script>
        jQuery(document).ready(function() {
            var searchRequest = null;
            $("#search").keyup(function() {
                var minlength = 1;
                var that = this;
                var value = $(this).val();
                var entitySelector = $("#entitiesNav").html('');
                if (value.length >= minlength ) {
                    if (searchRequest != null)
                        searchRequest.abort();
                    searchRequest = $.ajax({
                        type: "GET",
                        url: "{{ path('ajaxsearch') }}",
                        data: {
                            'q' : value
                        },
                        dataType: "text",
                        success: function(msg){
                            //we need to check if the value is the same
                            if (value===$(that).val()) {
                                var result = JSON.parse(msg);
                                $.each(result, function(key, arr) {
                                    $.each(arr, function(id, value) {
                                        if (key === 'examen') {
                                            if (id !== 'error') {
                                                console.log(value);
                                                console.log(id);
                                                entitySelector.append('<ul ><li>' +
                                                    '<a class="nav-link__list" href="http://127.0.0.1:8000/examen/listexamenFDetail/'+id+'">'+value[0]+'</a></li></ul><br>')   ;
                                            } else {
                                                entitySelector.append('<li class="errorLi">'+value+'</li>');
                                            }
                                        }
                                    });
                                });
                            }
                        }
                    });
                }
            });
        });
    </script>






{% endblock %}


